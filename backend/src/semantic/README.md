# Semantic 模块 (Semantic Analysis)

`semantic` 模块在元 AST 的基础上构建多层次的语义图谱，提供代码导航、重构和深度分析能力。

## 核心功能

- **Scope Graph 构建**: 通过分析元 AST 中的定义与使用节点，构建语言无关的引用解析。
- **跨文件解析**: 处理模块导入导出，建立项目级的符号引用网。
- **语义分析**: 提供跳转到定义、查找引用、类型跳转等功能。
- **重构支持**: 提供重命名、提取函数等操作的语义安全验证。

## 核心组件

- [graph.rs](./graph.rs): `GraphBuilder` 从元 AST 提取语义关系并填充图谱。
- [resolver.rs](./resolver.rs): `SymbolResolver` 执行符号查找与路径解析。
- [refactor.rs](./refactor.rs): `RefactorEngine` 负责生成语义化的变更请求。负责生成语义化的变更请求（Change Request）。

## 设计原则

- **基于元 AST**: 严禁直接依赖具体的语法解析器（如 Tree-sitter）。
- **增量更新**: 随着 Thread 中的变更，图谱能够进行增量局部更新。

## 架构设计细节

### 1. Scope Graph 引用解析
- **语言无关性**: 通过在元 AST 层级上定义“定义”和“使用”语义，实现跨语言的统一 Scope Graph 构建。
- **全局符号索引**: 处理复杂的模块导入导出逻辑，建立覆盖整个项目的多层级符号引用网络。

### 2. 语义重构引擎
- **安全验证**: 在执行重命名或函数提取等重构操作前，基于语义图谱进行严格的引用冲突检测。
- **意图化变更**: 重构结果以语义化的 Change Request 形式输出，确保在 Thread 合并时能保持意图的一致性。

### 3. 高性能增量更新
- **局部图谱维护**: 系统不需要在每次代码修改后重建全量索引，而是能够根据变更范围进行精准的增量更新。

---
更多技术细节请参阅源代码。
