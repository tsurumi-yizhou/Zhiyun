# Compiler 模块设计 (Compiler Module Design)

`compiler` 模块作为系统的 L3 层，通过集成真实的编程语言编译器或语言服务器 (LSP)，提供权威的语法检查、类型验证和代码诊断。

## 1. 核心功能

### 1.1 权威验证
- **真理来源**: 虽然 `syntax` 和 `semantic` 提供了快速反馈，但 `compiler` 模块是最终的正确性保障。
- **诊断收集**: 实时收集编译错误、警告和 Linter 提示，并将其映射到 Thread 中的特定变更。

### 1.2 插件化适配器
- **LSP 桥接**: 通过 LSP 协议与外部语言服务器（如 Rust Analyzer, gopls）通信。
- **自定义适配**: 支持直接调用编译器二进制文件（如 `javac`, `tsc`）。

## 2. 核心组件
- `CompilerRegistry`: 管理已加载的编译器插件。
- `DiagnosticManager`: 统一不同编译器的诊断格式。
- `ProjectAnalyzer`: 触发项目级的全量或增量检查。

## 3. 设计原则
- **异步执行**: 编译器分析通常开销较大，必须在后台异步执行。
- **松耦合**: 系统核心不强制要求编译器在线，但在缺少编译器时某些高级验证功能将不可用。
