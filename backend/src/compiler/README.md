# Compiler 模块 (Compiler Integration)

`compiler` 模块作为系统的 L3 层，通过集成真实的编程语言编译器或语言服务器 (LSP)，提供权威的语法检查、类型验证和代码诊断。

## 核心功能

- **权威验证**: 虽然 `syntax` 和 `semantic` 提供了快速反馈，但 `compiler` 模块是最终的正确性保障。
- **诊断收集**: 实时收集编译错误、警告和 Linter 提示，并将其映射到 Thread 中的特定变更。

## 核心组件

- [registry.rs](./registry.rs): `CompilerRegistry` 管理已加载的编译器插件。
- [diagnostic.rs](./diagnostic.rs): `DiagnosticManager` 统一不同编译器的诊断格式。
- [analyzer.rs](./analyzer.rs): `ProjectAnalyzer` 负责触发项目级的全量或增量检查。

## 设计原则

- **异步执行**: 编译器分析通常开销较大，必须在后台异步执行。
- **松耦合**: 系统核心不强制要求编译器在线，但在缺少编译器时某些高级验证功能将不可用。

## 架构设计细节

### 1. 权威验证机制
- **真理来源**: `compiler` 模块作为 L3 层，是系统最终的正确性保障。
- **诊断映射**: 实时收集编译错误、警告和 Linter 提示，并精准映射到 Thread 中的特定语义变更。

### 2. 插件化适配
- **LSP 桥接**: 通过 LSP 协议与外部语言服务器（如 Rust Analyzer, gopls）无缝通信。
- **自定义适配**: 支持直接调度编译器二进制文件（如 `javac`, `tsc`）进行验证。

### 3. 执行策略
- **异步分析**: 编译器操作通常开销巨大，系统采用完全异步的后台分析策略。
- **松耦合设计**: 系统核心不强制依赖编译器在线，确保在受限环境下的基本可用性。

---
更多技术细节请参阅源代码。
