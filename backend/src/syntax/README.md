# Syntax 模块 (Syntax Analysis)

`syntax` 模块负责将源代码解析为系统可理解的结构化数据，它是实现语言无关性的第一站。

## 核心功能

- **插件化解析引擎**: 默认使用 Tree-sitter 作为底层解析工具。
- **元 AST 转换**: 将 Tree-sitter 的输出转换为 `common/meta/ast` 中定义的 `MetaNode` 树。

## 核心组件

- [engine/](./engine/): 解析引擎的核心接口定义。
- [executor.rs](./executor.rs): `ParserExecutor` 负责调度注册的解析器插件。
- [loader.rs](./loader.rs): `GrammarLoader` 动态加载不同语言的语法文件和 SCM 查询。
- [cache.rs](./cache.rs): `IncrementalCache` 管理增量解析的缓存。

## 设计原则

- **不假设语言**: 所有的解析规则都存在于外部插件或配置中。
- **零硬编码**: 严禁在代码中出现语言特定的硬逻辑。

## 架构设计细节

### 1. 动态语法驱动
- **SCM 查询**: 通过加载特定的 `.scm` 文件，在不重新编译后端的情况下，动态定义符号提取、缩进对齐和语法高亮规则。
- **解析器插件化**: 支持在运行时动态加载新的 Tree-sitter 语言包，实现对任意编程语言的即时支持。

### 2. 标准化元 AST
- **解耦屏障**: 将异构的底层语法树转化为标准化的 `MetaNode`。这种设计使得 `semantic` 和 `agent` 模块可以编写一次逻辑，即可应用于所有支持的语言。

### 3. 高性能解析
- **增量缓存**: 实时监控文件的 Thread 变更流，仅对修改受影响的局部代码块进行增量解析，确保毫秒级的交互反馈。

---
更多技术细节请参阅源代码。
